% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/precompute_spline_structures.R
\name{precompute_spline_structures}
\alias{precompute_spline_structures}
\title{Precompute Spline Matrix Structures for Soil Profile Modeling}
\usage{
precompute_spline_structures(dIn, lam = 0.1)
}
\arguments{
\item{dIn}{Numeric vector of input soil depth boundaries (e.g., \code{c(0,5,15,30,60,100,200)}).}

\item{lam}{Numeric; spline smoothing parameter (\eqn{\lambda}). Smaller values produce smoother splines.}
}
\value{
A \code{list} containing precomputed matrix components used in mass-preserving spline fitting:
\describe{
  \item{\code{z}}{Coefficient matrix used to solve for spline coefficients.}
  \item{\code{rinv}}{Inverse of spline smoothness matrix.}
  \item{\code{q}}{Difference matrix for first derivatives.}
  \item{\code{u}}{Upper depths of each interval.}
  \item{\code{v}}{Lower depths of each interval.}
  \item{\code{delta}}{Thickness of each interval.}
}
}
\description{
Builds the matrix structures needed to fit a mass-preserving spline model, based on a given set of soil depth intervals and a smoothing parameter. These matrices are reused across all soil profiles or raster cells for efficient evaluation.
}
\examples{
dIn <- c(0,5,15,30,60,100,200)

spline_info <- precompute_spline_structures(dIn = dIn, lam = 0.1)

str(spline_info)

}
\seealso{
\code{\link{fit_mpspline_optimized}}, \code{\link{ea_rasSp_fast}}
}
\author{
Brendan Malone
}
\keyword{methods}
